# Title decisions are possible vs _all_ titles and are shown in the Title Diplomacy View, not the Intrigue View. The taker is in the FROM scope.
#
# filter = [capital/primary_title/owned/vassal_owned/sub_realm_owned/realm_owned/dynasty_owned/all]
# ai_target_filter = [capital/primary_title/owned/vassal_owned/sub_realm_owned/realm_owned/dynasty_owned/all] (which titles for which the AI evaluates the decision.)
#	owned: all titles owned by the AI
#	vassal_owned: all titles owned by direct vassal rulers of the AI's employer
#	sub_realm_owned: all titles below the AI's employer
#	realm_owned: all titles in the same top realm as the AI
#	dynasty_owned: all titles owned by members of the same dynasty
#	all: all titles (Avoid if possible. VERY CPU-HEAVY!)
#	

# Targetted decisions are possible vs _all_ other characters and shown are in the Diplomacy View, not the Intrigue View. The taker is in the FROM scope.
#
# filter = [self/court/home_court/vassals/sub_realm/realm/dynasty/all] ('self' MUST be set for decisions targetting only the taker, the other filter types can be set to lessen CPU load)
# ai_target_filter = [self/court/home_court/vassals/sub_realm/realm/dynasty/all] (which characters for which the AI evaluates the decision.)
#	court: all characters in the AI's host court, including prisoners, and characters currently away (wards, prisoners, etc)
#	home_court: all characters in the AI's home court, including prisoners, and characters currently away (wards, prisoners, etc)
#	vassals: direct vassal rulers of the AI's employer
#	sub_realm: all characters below the AI's employer
#	realm: all characters in the same top realm as the AI
#	dynasty: all members of the same dynasty
#	rivals: your rivals plus any character you have an opinion modifier with 'crime = yes' set (the same set of characters the 'is_foe' trigger evaluates)
#	all: all living characters (Avoid if possible. VERY CPU-HEAVY!)
#

title_decisions = {

	set_up_vassal = { # High Prio version
		only_playable = yes
		filter = owned
		third_party_filter = realm
		ai_third_party_filter = realm
		third_party = FROM
		ai_target_filter = owned
		# is_high_prio = yes
		ai_check_interval = 12
		
		from_potential = {
			is_playable = yes
		}

		third_party_potential = {
			
		}
		
		potential = {
			tier = COUNT
			owner = {
				ai = no
				character = FROM 
			}
		}

		allow = {
			FROM = {
				prestige = 10
			}
		}

		third_party_allow = {
			
		}

		third_party_score = {

		}

		effect = {
			if = {
				limit = {
					NOR = {
						is_nomadic = yes
						OR = {
							primary_title = { 
								OR = { 
									title = e_byzantium
									title = e_roman_empire
								}
								has_law = succ_byzantine_elective
							}
							any_liege = {
								AND = { 
									primary_title = { 
										OR = { 
											title = e_byzantium
											title = e_roman_empire
										}
										has_law = succ_byzantine_elective
									}
								}
							}
						}
					}
				}
				FROMFROM = {
					grant_title = ROOT
					liege = {
						make_tributary = { who = PREV tributary_type = true_vassal }
					}
					set_defacto_liege = THIS
				}
			}
			if = {
				limit = {
					AND = {
						is_nomadic = no
						OR = {
							primary_title = { 
								OR = { 
									title = e_byzantium
									title = e_roman_empire
								}
								has_law = succ_byzantine_elective
							}
							any_liege = {
								AND = { 
									primary_title = { 
										OR = { 
											title = e_byzantium
											title = e_roman_empire
										}
										has_law = succ_byzantine_elective
									}
								}
							}
						}
					}
				}
				FROMFROM = {
					grant_title = ROOT
				}
			}
			
		}

		revoke_allowed = {
			always = no
		}

		ai_will_do = {
			factor = 100
		}
	}
	
}

targetted_decisions = {
<<<<<<< HEAD
	
	
	
	
}

decisions = {
	
	take_spouse_titles = {
		is_high_prio = yes
		
		potential = {
			is_adult = yes
			is_female = no
			spouse = {
				is_landed = yes
			}
		}
		
		allow = {
			spouse = {
				NOT = {
					trait = ambitious
				}
			}
		}
		
		effect = {
			spouse = {
				any_demesne_title = {
					usurp_title = { target = ROOT }
				}
			}
		}
	}
	
}


=======

	offer_vassalage = {
		only_independent = yes
		is_high_prio = yes

		from_potential = {
			NOR = {
				is_nomadic = yes
				any_liege = {
					AND = { 
						primary_title = { 
							OR = { 
								title = e_byzantium
								title = e_roman_empire
							}
							has_law = succ_byzantine_elective
						}
					}
				}
			}
			OR = {
				tier = king
				tier = duke
				tier = emperor
			}
			NOT = { 
				is_tributary = { type = true_vassal suzerain = ROOT }
			}
		}

		potential = {
			NOT = {
				is_tributary = { type = true_vassal suzerain = FROM }
				tier = baron
				is_landed = no
			}
			NOR = {
				is_nomadic = yes
				any_liege = {
					AND = { 
						primary_title = { 
							OR = { 
								title = e_byzantium
								title = e_roman_empire
							}
							has_law = succ_byzantine_elective
						}
					}
				}
			}
			lower_real_tier_than = FROM
		}

		allow = {
			ROOT = {
				opinion = { who = FROM value = 25 }
			}
			NOT = { is_inaccessible_trigger = yes }
		}

		effect = {
			# FROM = {
			# 	make_tributary = { who = ROOT tributary_type = true_vassal }
			# }
			FROM = {
				save_event_target_as = target_asking_lord
				ROOT = {
					character_event = { id = AVE_MARIA.16 days = 5 }
				}
			}
		}

		ai_will_do = {
			factor = 0
		}

	}

	swear_fealty_true_vassal = {
		only_independent = yes
		is_high_prio = yes

		potential = {
			NOR = {
				is_nomadic = yes
				any_liege = {
					AND = {
						primary_title = {
							OR = {
								title = e_byzantium
								title = e-e_roman_empire
							}
						}
						has_law = succ_byzantine_elective
					}
				}
			}
			higher_real_tier_than = FROM
			NOT = {
				is_tributary = {
					type = true_vassal
					suzerain = ROOT
				}
			}
		}

		from_potential = {
			NOT = {
				is_tributary = {
					type = true_vassal
					suzerain = ROOT
				}
			}
			NOR = {
				is_nomadic = yes
				any_liege = {
					AND = { 
						primary_title = { 
							OR = { 
								title = e_byzantium
								title = e_roman_empire
							}
							has_law = succ_byzantine_elective
						}
					}
				}
			}
		}

		effect = {
			FROM = {
				save_event_target_as = target_asking_vassal
			}
			ROOT = {
				character_event = { id = AVE_MARIA.18 days = 5 }
			}
		}

		ai_will_do = {
			factor = 0
			modifier = {
				
			}
		}

	}

	mediate_vassals_wars = {
		only_independent = yes
		is_high_prio = yes

		from_potential = {
			NOR = {
				is_nomadic = yes
				any_liege = {
					AND = { 
						primary_title = { 
							OR = { 
								title = e_byzantium
								title = e_roman_empire
							}
							has_law = succ_byzantine_elective
						}
					}
				}
			}
			OR = {
				tier = king
				tier = duke
				tier = emperor
			}
		}

		potential = {
			is_tributary = { type = true_vassal suzerain = FROM }
			lower_real_tier_than = FROM
			war = yes
			any_current_enemy = {
				is_tributary = { type = true_vassal suzerain = FROM }
			}
		}

		allow = {
			opinion = { who = ROOT value = 25 }
		}

		effect = {
			ROOT = {
				#character_event = { id = xx days = 5 }
			}
			ROOT = {
				any_war = {
					limit = {
						OR = {
							any_attacker = {
								is_tributary = { type = true_vassal suzerain = FROM }
							}
							any_defender = {
								is_tributary = { type = true_vassal suzerain = FROM }
							}
						}
					}
					end_war = whitepeace
				}
			}
		}

		ai_will_do = {
			factor = 0
		}

	}

}

decisions = {

	# True Vassals related decisions
	convocation_au_ban_offensif = {
		only_independent = yes
		is_high_prio = yes

		potential = {
			is_playable = yes
			NOR = {
				is_nomadic = yes
				is_tribal = yes
				culture = greek
				any_liege = {
					AND = { 
						primary_title = { 
							OR = { 
								title = e_byzantium
								title = e_roman_empire
							}
							has_law = succ_byzantine_elective
						}
					}
				}
			}
			OR = {
				tier = king
				tier = duke
				tier = emperor
			}
			war = yes
			is_primary_war_attacker = yes
		}

		allow = {
			is_primary_war_attacker = yes
			war = yes
			prisoner = no
			NOT = { is_inaccessible_trigger = yes }
			prestige = 10
			NOT = { 
				has_character_flag = convocation_au_ban_offensif
			}
		}

		effect = {
			set_character_flag = convocation_au_ban_offensif
			any_tributary = {
				if = {
					limit = {
						OR = {
							is_tributary = { type = true_vassal suzerain = ROOT }
							#is_tributary = { type = true_vassal_hre suzerain = ROOT }
						}
					}
					set_character_flag = servitium_debitum
					character_event = {
						id = AVE_MARIA.25
						days = 5
					}
				}
			}
			save_event_target_as = target_receiver_of_servitium_debitum
		}

		ai_will_do = {
			factor = 1
		}
	}

	convocation_au_ban_defensive = {
		only_independent = yes
		is_high_prio = yes

		potential = {
			is_playable = yes
			NOR = {
				is_nomadic = yes
				is_tribal = yes
				culture = greek
				any_liege = {
					AND = { 
						primary_title = { 
							OR = { 
								title = e_byzantium
								title = e_roman_empire
							}
							has_law = succ_byzantine_elective
						}
					}
				}
			}
			OR = {
				tier = king
				tier = duke
				tier = emperor
			}
			war = yes
			OR = {
				is_primary_war_defender = yes
				any_tributary = {
					is_primary_war_defender = yes
					NOT = { war_with = ROOT }
					any_current_enemy = {
						NOT = {
							is_tributary = { type = true_vassal suzerain = ROOT }
						}
					}
				}
			}
		}

		allow = {
			OR = {
				is_primary_war_defender = yes
				any_tributary = {
					is_primary_war_defender = yes
					NOT = { war_with = ROOT }
					any_current_enemy = {
						NOT = {
							is_tributary = { type = true_vassal suzerain = ROOT }
						}
					}
				}
			}
			war = yes
			prisoner = no
			NOT = { is_inaccessible_trigger = yes }
			prestige = 10
			NOT = { 
				has_character_flag = convocation_au_ban_defensive
			}
		}

		effect = {
			set_character_flag = convocation_au_ban_defensive
			if = {
				limit = {
					NOT = {
						is_primary_war_defender = yes
					}
				}
				any_tributary = {
					limit = {
						is_primary_war_defender = yes
						NOT = { war_with = ROOT }
						any_current_enemy = {
							NOT = {
								is_tributary = { type = true_vassal suzerain = ROOT }
							}
						}
					}
					set_character_flag = target_attacked_vassal
				}
				character_event = { id = AVE_MARIA.29 days = 1 tooltip = "appel_au_ban"}
			}
			else_if = {
				limit = {
					is_primary_war_defender = yes
				}
				any_tributary = {
					limit = {
						 OR = {
							is_tributary = { type = true_vassal suzerain = FROM }
							is_tributary = { type = true_vassal_hre suzerain = FROM }
						}
					}
					join_defender_wars = ROOT
				}
			}
			save_event_target_as = target_receiver_of_servitium_debitum
		}

		ai_will_do = {
			factor = 1
		}
	}

	abdicate_throne = {
		from_potential = {
			ai = no
			is_ruler = yes
			is_feudal = yes
		}
        potential = { 
			# Flags that will not allow the abdicate button to display and prevents spamming of the button between 2 characters in the realm
			NOT = { 
				has_character_flag = wants_to_abdicate 
				has_character_flag = has_abdicated_throne 
				}
			# condition's for the heir (must 16 and has not abdicated a throne before) if condition's are not met button will not display (might want to remove the is_adult condition)
			current_heir = { 
			is_adult = yes 
			dynasty = ROOT
			NOT = { has_character_flag = has_abdicated_throne }
			}

			# No gavelkind succession
			OR = {
				AND = {
					primary_title = { tier = KING }
					NOT = {
						any_demesne_title = {
							kingdom = { has_law = succ_gavelkind }
						}
					}
				}
				AND = {
					primary_title = { tier = EMPEROR }
					NOT = {
						any_demesne_title = {
							empire = { has_law = succ_gavelkind }
						}
					}
				}
				AND = {
					NOT = { primary_title = { higher_tier_than = DUKE } }
					NOT = {
						primary_title = {
							has_law = succ_gavelkind
						}
					}
				}
			}
			# Traits checks
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			NOT = { trait = imbecile }
			NOT = { trait = cruel }
			NOT = { trait = paranoid }
			NOT = {
				AND = {
					trait = envious
					trait = greedy
				}
			}			
        } 		
		allow = {
			war = no
			prisoner = no			
			
			# Age checks
			OR = {
				AND = {
					age = 60
					NOT = { trait = envious }
					NOT = { trait = greedy }
				}
				AND = {
					age = 50
					NOT = { trait = envious }
					NOT = { trait = greedy }
				}
				AND = {
					OR = {
						trait = depressed
						trait = stressed
					}
					NOT = { trait = envious }
					NOT = { trait = greedy }
					age = 40
				}
				AND = {
					OR = {
						trait = content
						trait = humble
					}
					OR = {
						trait = shy
						trait = craven
					}
					NOT = { trait = envious }
					NOT = { trait = greedy }
					age = 30
				}
                AND = {
                    current_heir = { age = 16 }
                }
			}
			
			# Costs
			prestige = 750
		}
		effect = {
			prestige = -750
			piety = 100
			add_trait = content
			set_character_flag = wants_to_abdicate
			current_heir = {
				character_event = { id = ABDICATE.001 days = 3 random = 3 tooltip = "abd_ask" }
			}
		}
		ai_will_do = {
			factor = 0 # Prevent AI from doing (can cause major crashes)
		}		
	}

	true_vassals_hommage = {
		only_independent = yes
		is_high_prio = yes
		only_playable = yes

		potential = {
			is_tributary = yes
			NOT = { has_character_flag = gave_homage_to_liege }
			NOT = { has_trait = travelling }
			age = 12
			NOT = { mercenary = yes }
		}

		allow = {
			NOT = { has_character_flag = gave_homage_to_liege }
			NOT = { is_inaccessible_trigger = yes }
			suzerain = {
				NOT = { is_inaccessible_trigger = yes }
			}
		}

		effect = {
			suzerain = {
				location = {
					save_event_target_as = target_liege_location
				}
			}
			# move_character = event_target:target_liege_location
			set_character_flag = do_not_disturb
			#add_trait = travelling
			#information event
			character_event = {
				id = AVE_MARIA.10
				days = 1
				tooltip = "homage"
			}			
		}

		ai_will_do = {
			factor = 1
		}

	}

	#Kingdom Creations
	create_kingdom_k_brittany = {
		is_high_prio = yes

		potential = {
			age = 16
			prisoner = no
			NOT = {
				trait = incapable
				has_landed_title = k_brittany
			}
			has_landed_title = d_brittany
			religion_group = christian
			independent = yes
			culture = breton
		}

		allow = {
			prestige = 500
			OR = {
				completely_controls = d_brittany
			}
		}

		effect = {
			narrative_event = { id = EVTDESCA_AVE_MARIA_events.60 tooltip = create_kingdom_k_brittany_tt }
		}

		ai_will_do = {
			factor = 1
		}
	}

	#QOL decisions
	conscript_merchant_ships = {
		is_high_prio = yes
		only_independent = yes
		only_playable = yes

		potential = {
			year = 1000
			war = yes
			NOT = {
				has_earmarked_regiments = conscripted_merchant_ships
			}
			#has_overseas_holdings = yes
		}
		allow = {
			war = yes
			wealth = 50
			year = 1000
		}
		effect = {
			wealth = -50
			spawn_fleet = {
				province = closest # closest sea zone
				owner = ROOT
				disband_on_peace = yes
				earmark = conscripted_merchant_ships
				troops = {
					galleys = { 40 40 }
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					any_war = {
						OR = {
							defender = { character = ROOT }
							attacker = { character = ROOT }
						}
					}
				}
			}
		}
	}

	#Narrative driven decisions
	#Decision for invasion of anatolia if armenian invasion is successful
	seljuk_conquests_crusade_lead_up_1 = {
		only_independent = yes
		is_high_prio = yes

		potential = {
			is_playable = yes
			culture_group = altaic
			has_landed_title = k_persia
			war = no
			has_global_flag = seljuk_won_in_armenia
			NOT = { has_character_flag = seljuk_invasion_of_anatolia }
		}

		allow = {
			is_playable = yes
			culture_group = altaic
			has_landed_title = k_persia
			war = no
			#trait = ambitious
			prestige = 500
			martial > 15
		}

		effect = {
			# declares an invasion cb war on as a main defender jerusalem duchy (so the ai can be tricked into sieging jerusalem)
			# avec le système de défense des vassaux normalement tout le monde rejoint le fatimid y compris
			# set a flag on the seljuk ruler (for an on_war_won called event that will switch the ownership of the levant)
			character_event = { id = true_vassals.18 days = 1 tooltip = "letsgo_for_anatolia_alp"}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				#ambitious modifier
			}
		}
	}

	#Decision for invasion of levant if anatolia invasion is successful
	seljuk_conquests_crusade_lead_up_2 = {
		only_independent = yes
		is_high_prio = yes

		potential = {
			is_playable = yes
			culture_group = altaic
			has_landed_title = k_persia
			war = no
			has_global_flag = seljuk_won_in_anatolia
			NOT = { has_character_flag = seljuk_invasion_of_levant }
		}

		allow = {
			is_playable = yes
			culture_group = altaic
			has_landed_title = k_persia
			war = no
			#trait = ambitious
			prestige = 500
			martial > 15
		}

		effect = {
			# declares an invasion cb war on as a main defender jerusalem duchy (so the ai can be tricked into sieging jerusalem)
			# avec le système de défense des vassaux normalement tout le monde rejoint le fatimid y compris
			# set a flag on the seljuk ruler (for an on_war_won called event that will switch the ownership of the levant)
			character_event = { id = true_vassals.20 days = 1 tooltip = "letsgo_for_levant_alp"}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				#ambitious modifier
			}
		}
	}

	roman_emperor_calls_for_the_pope_help = {
		only_independent = yes
		is_high_prio = yes

		potential = {
			has_landed_title = e_byzantium
			war = no
			has_global_flag = seljuk_won_in_anatolia
			has_global_flag = seljuk_won_in_levant
		}

		allow = {
			is_playable = yes
			has_landed_title = e_byzantium
		}

		effect = {
			narrative_event = { id = XX days = 2 tooltip =  }
			set_global_flag = roman_emperor_calls_for_help
		}

		ai_will_do = {
			factor = 1
			modifier = {
				#ambitious modifier
			}
		}
	}

}

# plot_decisions = {

	# plot_steal_vassalage_from_a_vassal = {
		# only_playable = yes
		# is_high_prio = yes
		# ai_check_interval = 24

		# potential = {
			# always = no # Disabled
			# is_playable = yes
			# age = 16
			# has_plot = plot_steal_vassalage_from_a_vassal
			# NOT = { has_character_flag = plot_steal_vassalage_from_a_vassal_taken }
		# }

		# allow = {
			# plot_power = 0.8
			# num_of_plot_backers = 1
			# plot_target_char = {
				# prisoner = no
				# NOT = {
					# any_war = {
						# defender = {
							# character = PREVPREV
						# }
					# }
				# }
			# }
		# }
		# effect = {
			# plot_target_char = {
				# #letter_event = { id = 8000 days = 3 tooltip = "EVTTOOLTIP8000" }
			# }
			# hidden_tooltip = {
				# set_character_flag = plot_steal_vassalage_from_a_vassal_taken
				# activate_plot = yes
			# }
		# }
		# revoke_allowed = {
			# always = no
		# }
		# ai_will_do = {
			# factor = 1
			# modifier = {
				# factor = 0
				# NOT = { plot_power = 0.9 }
			# }
		# }
	# }

# }
>>>>>>> parent of d9e3050... 0.2
