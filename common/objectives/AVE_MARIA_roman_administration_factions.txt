# Supported types: character
#
# Note: if 'chance' evaluates to 0, an AI character will also abandon the focus
#

########################################################################################
#                                         											   #
# AVE MARIA Factions																   #
# A Very Extensive Modification for Appropriate Realism and Improved Authenticity	   #
#                                         											   #
# Roman Administration Factions					                       				   #
#                               													   #
########################################################################################

# Written by Atreides

#################
# POI			#
#################
roman_administration_faction_powerful_man = {
	type = liege_titles
	
	# Plotter scope
	potential = {
		is_playable = yes
		independent = no
		is_nomadic = no
		prisoner = no
		is_adult = yes
		primary_title = { holy_order = no }
		is_landed = yes
		NOT = { is_incapable = yes }
		society_member_of = roman_administration_imperial_court
		liege = {
			primary_title = {
				OR = { 
					title = e_byzantium
					title = e_roman_empire
				}
				has_law = succ_byzantine_elective
			}
		}
		OR = {
			NOT = { has_character_flag = former_faction_leader }
			had_character_flag = { flag = former_faction_leader days = 7 }
		}
		NOT = {
			any_faction_backer = {
				in_faction = roman_administration_faction_powerful_man
				NOT = { has_character_flag = removed_from_leadership }
				higher_real_tier_than = ROOT
			}
		}
		NOR = {
			in_revolt = yes
		}
	}
	
	# Target scope (ROOT = liege title, FROM = faction leader)
	allow = {
		is_primary_holder_title = yes
		FROM = { primary_title = { is_primary_type_title = no } }
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_playable = yes
			independent = no
			is_nomadic = no
			prisoner = no
			is_adult = yes
			is_landed = yes
			NOT = { is_inaccessible_trigger = yes }
			society_member_of = roman_administration_imperiarl_court
			NOR = {
				in_revolt = yes
				is_incapable = yes
				liege = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_coerced_into_leaving_faction } }
				liege = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_subjugated } }
				liege = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_subjugated_other_rel } }
			}
		}
	}
	
	# AI creation weight (ROOT = title, FROM = faction creator)
	chance = {
		factor = 100
		modifier = {
			factor = 0
			FROM = {
				NOT = { has_character_flag = faction_court_supporter }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		modifier = {
			factor = 0
			FROM = {
				OR = {
					controls_religion = yes
					rightful_religious_head_scope = { character = PREV }
				}
			}
		}
		modifier = {
			factor = 10
			FROM = {
				real_tier = king
				liege = { real_tier = emperor }
			}
		}
		modifier = {
			factor = 10
			FROM = {
				real_tier = duke
				liege = { real_tier = king }
			}
		}
		modifier = {
			factor = 0
			current_heir = { character = FROM }
		}
		modifier = {
			factor = 0
			FROM = { primary_title = { is_primary_type_title = yes } }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 100
		modifier = {
			factor = 0
			NOR = {
				ROOT = { has_character_flag = faction_court_supporter }
				AND = {
					ROOT = { has_character_flag = will_join_civil_war }
					FROM = {
						has_character_flag = civil_war_faction_leader
						pf_not_regular_faction_war_trigger = no
					}
				}
			}
		}
		modifier = {
			factor = 10
			ROOT = { has_character_flag = will_join_civil_war }
		}
		modifier = {
			factor = 0
			OR = {
				controls_religion = yes
				rightful_religious_head = ROOT
			}
		}
	}

	success = {
		always = no
	}

	abort = {
		always = no
	}

	abort_effect = {
	}

	effect = {
	}
}	
