########################################################################################
#                                         											   #
# AVE MARIA events																	   #
# A Very Extensive Modification for Appropriate Realism and Improved Authenticity	   #
#                                         											   #
# ID AVE_MARIA_opus_ruralium_commodorum.1 - AVE_MARIA_opus_ruralium_commodorum.499	   #
#                               													   #
########################################################################################

# Written by Atreides

namespace = AVE_MARIA_opus_ruralium_commodorum_pop_growth

##NOTES:
##
## Start Up province pop ceiling
character_event = {
	id = AVE_MARIA_opus_ruralium_commodorum_pop_growth.1

	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		ai = no
		is_multiplayer_host_character = yes
		is_save_game = no
	}
	
	immediate = {
		any_title = {
			limit = {
				tier = baron
			}
			location = { ### Province pop natural ceiling
				trigger_switch = {	
					on_trigger = terrain
					orc_forest_flat = { change_variable = { which = orc_province_natural_pop_ceiling value = 80 } }
					orc_forest_hill = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_forest_mountains = { change_variable = { which = orc_province_natural_pop_ceiling value = 40 } }
					orc_forest_highlands = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_woods_flat = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_woods_hill = { change_variable = { which = orc_province_natural_pop_ceiling value = 80 } }
					orc_woods_mountains = { change_variable = { which = orc_province_natural_pop_ceiling value = 40 } }
					orc_woods_highlands = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_shrub_flat = { change_variable = { which = orc_province_natural_pop_ceiling value = 80 } }
					orc_shrub_hill = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_shrub_mountains = { change_variable = { which = orc_province_natural_pop_ceiling value = 40 } }
					orc_shrub_highlands = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_grass_flat = { change_variable = { which = orc_province_natural_pop_ceiling value = 80 } }
					orc_grass_hill = { change_variable = { which = orc_province_natural_pop_ceiling value = 80 } }
					orc_grass_mountains = { change_variable = { which = orc_province_natural_pop_ceiling value = 80 } }
					orc_grass_highlands = { change_variable = { which = orc_province_natural_pop_ceiling value = 80 } }
					orc_desert_flat = { change_variable = { which = orc_province_natural_pop_ceiling value = 40 } }
					orc_desert_hill = { change_variable = { which = orc_province_natural_pop_ceiling value = 40 } }
					orc_desert_mountains = { change_variable = { which = orc_province_natural_pop_ceiling value = 40 } }
					orc_desert_highlands = { change_variable = { which = orc_province_natural_pop_ceiling value = 40 } }
					orc_jungle_flat = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_jungle_hill = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_floodplains = { change_variable = { which = orc_province_natural_pop_ceiling value = 100 } }
					orc_alpine_tundra = { change_variable = { which = orc_province_natural_pop_ceiling value = 40 } }
					orc_marsh = { change_variable = { which = orc_province_natural_pop_ceiling value = 80 } }
					orc_taiga = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_tundra = { change_variable = { which = orc_province_natural_pop_ceiling value = 60 } }
					orc_small_island = { change_variable = { which = orc_province_natural_pop_ceiling value = 40 } }
				}
			}
		}
	}
}

## Yearly food calculation
character_event = {
	id = AVE_MARIA_opus_ruralium_commodorum_pop_growth.2

	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		ai = no
		is_multiplayer_host_character = yes
	}
	
	immediate = {
		any_title = {
			limit = {
				tier = baron
			}
			if = {
				limit = {
					check_variable = { which = orc_food_surplus value > 1 }
				}
				orc_apply_pop_growth_effect = yes
			}
			subtract_variable = { which = orc_food which = orc_holding_total_pop }
		}
		##Is there a food excedent: trigger on food excedent
		## How much is the food excedent: what is going to be the growth, compare it to the max pop ceiling, if below, apply normal growth%, if above, do not apply %
		
	}
}

character_event = {
	id = AVE_MARIA_opus_ruralium_commodorum_pop_growth.3

	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		ai = no
		is_multiplayer_host_character = yes
	}
	
	immediate = {
		any_title = {
			limit = {
				tier = baron
			}
			if = {
				limit = {
					check_variable = { which = orc_food >= 1 }
				}
				if = {
					limit = {
						location = { religion_group = christian }
					}
					change_variable = { which = orc_rural_peasant_pop_christian }
				}
			}
		}
	}
}
